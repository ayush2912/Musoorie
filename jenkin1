pipeline{
agent any
 
stages{
 stage(compile){
    steps{
         sh 'mvn compile'
         }
}
 stage(test){
     steps{
        sh 'mvn test'
      }
}
 stage(pacakge){
steps{
        sh 'mvn package'
      }
}
 stage(deploy){
 
     
steps{
sh 'docker system prune --all'

 sh 'sudo docker build -t ayush3:$BUILD_NUMBER .'
sh' sudo docker container run -itd --name ayush$BUILD_NUMBER -p 8082:8080 ayush3:$BUILD_NUMBER '

}
}

}
}
