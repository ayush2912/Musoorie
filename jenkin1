pipeline{
agent any
 
stages{
 stage(compile){
    steps{
         sh 'mvn compile'
         }
}
 stage(test){
     steps{
        sh 'mvn test'
      }
}
 stage(pacakge){
steps{
        sh 'mvn package'
      }
}
 stage(deploy){
 
     
steps{
sh 'sudo docker system prune -af'

 sh 'sudo docker build -t Webimage:$BUILD_NUMBER .'
sh 'sudo docker container run -itd --name Webserver:$BUILD_NUMBER -p 8081:8080 Webimage:$BUILD_NUMBER'


}
}

}
}
